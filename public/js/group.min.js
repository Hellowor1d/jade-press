!function(){var t=Vue.$alert,e={},s=h5.accesses.map(function(t){return e[t.uri||t.url]=t,t.uri||t.url});Vue.use(zPagenav);var i=new Vue({el:"body",data:{loaded:!0,tab:"list",form1:null,form2:null,form3:null,accessObj:e,accesses:s,formData1:{page:1,pageSize:20,maxLink:5,fields:{desc:1,access:1,name:1,type:1}},formData2:{access:[]},formData3:{},currentEditItem:{},total:0,onSubmit1:!1,onSubmit2:!1,onDel:!1,currentDelItem:{},state:"list",editIndex:0,list:[],showMoreOption2:!1,showMoreOption3:!1,onValidateStyle2:!1,onValidateStyle3:!1,onloadPost:!1,validateStyleMsg2:{},validateStyleMsg3:{},onloadAccess:!1,rows:10},computed:{},methods:{setTab:function(t){this.tab=t},desc:function(t){return this.accessObj[t].name},checkShow:function(t){return"built-in"===t.type?!1:"list"===this.state?!0:t._id===this.currentEditItem._id||t._id===this.currentDelItem._id},checkAccess2:function(){return this.formData2.access.length>0},checkAccess3:function(t){return this.formData3.access.length>0},inAccesses:function(t,e){return(e||[]).indexOf(t)>-1},remove:function(t,e){for(var s=0,i=e.length;i>s;s++)if(t===e[s])return e.splice(s,1)},toggleAccess:function(t,e){this.inAccesses(t,e)?this.remove(t,e):e.push(t)},formHook2:function(t){this._form2=t},setPristine:function(){var t=this;Vue.nextTick(function(){t._form2.setPristine()})},setDirty:function(){this._form2.setDirty()},edit:function(t,e){this.state="edit",this.editIndex=e,this.currentEditItem=Object.assign({},t),this.formData3=Object.assign({},t)},del:function(t){this.state="del",this.currentDelItem=Object.assign({},t)},cancelEdit:function(t){this.state="list",this.currentEditItem={}},cancel:function(t){this.state="list",this.currentDelItem={}},reset:function(){this.formData2={access:[]}},add:function(){var e=this;if(!e.onSubmit2){if(e.form2.$invalid)return this.setDirty();e.onSubmit2=!0,$.ajax2({type:"post",url:h5.host+"/api/group/add",data:e.formData2}).then(function(s){e.onSubmit2=!1;var i=s;i.errorMsg||i.errs?t(i.errorMsg||i.errs.join(";"),"danger","#msg2"):(e.reset(),e.setPristine(),t("add new user group done","success","#msg2",1e4),e.total++,e.list.push(i.result))},function(s){e.onSubmit2=!1,t("add user group failed","danger","#msg1")})}},update:function(){var e=this;e.onSubmit3||e.form3.$invalid||(e.onSubmit3=!0,$.ajax2({type:"post",url:h5.host+"/api/group/update",data:e.formData3}).then(function(s){e.onSubmit3=!1;var i=s;i.errorMsg||i.errs?t(i.errorMsg||i.errs.join(";"),"danger","#msg31",1e4):(e.list.$set(e.editIndex,e.formData3),e.state="list",e.currentEditItem={},t("update group done","success","#msg3",1e4))},function(s){e.onSubmit3=!1,t("update user group failed","danger","#msg31",1e4)}))},delConfirm:function(e,s){var i=this;if(!i.onDel){var n={_id:this.currentDelItem._id};i.onDel=!0,$.ajax2({type:"post",url:h5.host+"/api/group/del",data:n}).then(function(e){i.onDel=!1;var n=e;n.errorMsg||n.errs?t(n.errorMsg||n.errs.join(";"),"danger","#msg-item",1e4):(i.list.splice(s,1),i.total--,i.state="list",t("delete done","success","#msg3",1e4))},function(e){i.onDel=!1,t("delete failed","danger","#msg-item",1e4)})}},getList:function(){var e=this;e.onSubmit1||e.form1.$invalid||(e.onSubmit1=!0,$.ajax2({type:"post",url:h5.host+"/api/group/get",data:e.formData1}).then(function(s){e.onSubmit1=!1;var i=s;i.errorMsg?t(i.errorMsg,"danger","#msg1"):i.errs?t(i.errs.join(";"),"danger","#msg1"):(e.total=i.total,e.list=i.result)},function(s){e.onSubmit1=!1,t("get list failed","danger","#msg1")}))}},events:{"page-change":function(t){this.getList()}}});i.getList()}();